{#=====================================================
  About page (DEMO)
  - Information about Flask
  - Information about Jinja
  - Information about Turso
  - Information about PicoCSS
=====================================================#}

{% extends 'pages/base.jinja' %}


{% block title %}

    User {{ user.username }} - Dollar Scholar

{% endblock %}



{% block content %}

    <h1> 
        ðŸ‘¤ {{ user.username }} 

        {% include "components/tier-icon.jinja" %}
        
    </h1>

    {% if session.user_id == user.id %}

        {% if user.verified == 1 %}

            <span>You are <strong>verified</strong>.</span>

        {% else %}

            <span>You are <strong>not verified</strong>.</span>

        {% endif %}

        <span>You currently have the tier <strong>{% include "components/tier-icon-name.jinja" %}</strong>. </span>

        {% if session.tier < 4 and session.is_admin == false %}

            <span>You can upgrade your tier to see more content.</span>

        {% endif %}

        <form action="/change-tier-user" method="POST" id="changeTierUser">

            <label for="tier">Below you may apply for a different tier. Doing so will unverify you. </label>
            
            <div class="tierSelect">

                <select name="tier">
                    <option value="4">ðŸ¥‡Gold</option>
                    <option value="3">ðŸ¥ˆSilver</option>
                    <option value="2">ðŸ¥‰Bronze</option>
                    <option value="1">ðŸ†“Basic</option>
                </select>

                <input type="submit">
            
            </div>

        </form>

        <a href="/logout" role="button" id="logOutButton">Log out</a>

    {% endif %}

    <br>
    <br>

    <section id="user">

        <p> {{ user.username }} 's posts and comments</p>

        <ul>
            {% for item in items %}

                {% if item.type == "post" %}
                    <li>
                        <strong><a href="/post/{{ item.p_id }}"> {{ item.title }} </a></strong>
                        <small>{{ item.date | localtimestamp }}</small>


                        {% if item.video_id %}
                        <br>
                        <iframe 
                            width="560" height="315" 
                            src="https://www.youtube.com/embed/{{ item.video_id }}" 
                            title="YouTube video player" 
                            frameborder="0" 
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                            referrerpolicy="strict-origin-when-cross-origin" 
                            allowfullscreen>
                        </iframe>
                        {% endif %}

                        <br>

                        <span class="multiline-ellipsis" >{{ item.content }}</span>

                        {% if session.user_id == item.author %}
                            <br>
                            <span>
                                <a href="/delete-post/{{ item.p_id }}">
                                
                                    delete

                                    <svg class="bin" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0" />
                                    </svg>
                                    
                                </a>
                            </span>
                        {% endif%}
                    </li>

                {% elif item.type == "comment" %}

                    <li>
                        <strong><a href="/post/{{ item.c_post }}">See post â¬ˆ</a></strong>
                        <small>{{ item.date | localtimestamp}}</small>
                        <br>
                        <span>{{ item.content }}</span>
                        {% if session.user_id == item.author %}
                            <br>
                            <span>
                                <a href="/delete-comment/{{item.c_post}}/{{ item.c_id }}">
                                    
                                    delete

                                    <svg class="bin" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0" />
                                    </svg>

                                </a>
                            </span>
                        {% endif%}
                    </li>

                {% endif %}

            {% else %}

                <p>This user has not made any posts or comments.</p>

            {% endfor %}
        </ul>
    
    </section>

    


{% endblock %}

